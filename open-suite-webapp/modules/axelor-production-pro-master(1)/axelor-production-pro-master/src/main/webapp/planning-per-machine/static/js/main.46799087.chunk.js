(this["webpackJsonpaxelor-planning-per-machine"]=this["webpackJsonpaxelor-planning-per-machine"]||[]).push([[0],{222:function(e,t,n){},328:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(6),o=n.n(i),c=(n(222),n(8)),l=n(370),s=n(368),d=n(329),u=n(365),p=n(12),m=n(66),h=n(21),f=function(e,t,n){return{display:"flex",flexDirection:"column",position:"relative","> .error":{position:"absolute",top:e?50:32,fontSize:"0.820rem",lineHeight:"1.15rem",color:"red",padding:"0 8px"},"> .input-container":{borderWidth:1,borderStyle:"solid",borderColor:"#0288d1",padding:8,borderRadius:4,transition:"all ease-in 0.2s","> .label-wrapper":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.820rem",lineHeight:"1.15rem",transition:"color ease-in 0.2s",color:"grey","> .indicator":{color:t?"red":"inherit"}},"> .input-wrapper > input, > .input-wrapper > textarea":{width:"100%",font:"inherit",fontSize:"1rem",lineHeight:"1.4rem",backgroundColor:"transparent",border:"none",padding:0,margin:0,color:"black",outline:"none",textOverflow:"ellipsis"},"> .input-wrapper":{".select-value, .input-like":{lineHeight:"1.4rem",minHeight:"1.4rem",outline:"none",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",color:"black"}}},width:"87%",overflow:"hidden",minWidth:"80px",minHeight:64,borderRadius:4,marginTop:"5%",marginLeft:"5%",textAlign:"center"}},v=Object(a.forwardRef)((function(e,t){var n=e.children,i=e.className,o=(e.disabled,e.error),c=e.label,l=(e.readOnly,e.required),s=!!o,d=Object(a.useCallback)((function(){t&&t.current.focus()}),[t]);return r.a.createElement("div",{className:Object(h.b)(Object(h.a)(f(!!c,s)),i),onClick:d},r.a.createElement("div",{className:"input-container"},!!c&&r.a.createElement("div",{className:"label-wrapper"},c,l&&r.a.createElement("span",{className:"indicator"}," *")),r.a.createElement("div",{className:"input-wrapper"},n)),s&&r.a.createElement("div",{className:"error"},o))}));v.displayName="InputContainer",v.defaultProps={className:void 0,disabled:void 0,error:void 0,label:void 0,readOnly:void 0,required:void 0};var g=v,b=["className","defaultValue","disabled","error","label","name","onChange","onBlur","readOnly","required","value"],O=Object(a.forwardRef)((function(e,t){var n=e.className,i=e.defaultValue,o=e.disabled,c=e.error,l=e.label,s=e.name,d=e.onChange,u=e.onBlur,h=e.readOnly,f=e.required,v=e.value,O=Object(m.a)(e,b),_=Object(a.useRef)(null),y=Object(p.a)({},O.field);0!==Object.keys(y).length&&(delete O.form,delete O.field);var w=t;return w||(w=_),r.a.createElement(g,{className:n,label:l,error:c,disabled:o,readOnly:h,required:f,ref:w},r.a.createElement("input",Object.assign({name:s,ref:w,defaultValue:i,value:v,onChange:d,onBlur:u,disabled:o,readOnly:h},y,O)))}));O.displayName="Input",O.defaultProps={className:void 0,defaultValue:void 0,disabled:void 0,error:void 0,field:void 0,form:void 0,label:void 0,name:void 0,onBlur:void 0,onChange:void 0,placeholder:void 0,readOnly:void 0,required:void 0,type:"text",value:void 0};var _=O,y=n(13),w=n.n(y),E=n(23),k=n(27),x=n.n(k);function S(e){for(var t in e)return!1;return!0}function C(e){if(null==e)return{};var t={};return e.forEach((function(e){t[e.id]=e})),Object(p.a)({},t)}function D(e){var t=e&&e.split(":"),n=0;if(t)if("00"===t[1])t[1]=60,n=parseInt(t[0],0)*parseInt(t[1],0);else{var a=60/parseInt(t[1],0);n=(parseInt(t[0],0)*a+1)*parseInt(t[1],0)}return n}function T(e){return window._t&&"string"===typeof e?window._t(e):e}function j(e){var t=window.scheduler;return t.templates.day_date(e)+", "+t.templates.event_date(e)}var L=[T("Draft"),T("Canceled"),T("Planned"),T("In progress"),T("Standby"),T("Finished")];function I(e){return x()(e).format("YYYY-MM-DD HH:mm")}function M(e){return x()(e,"YYYY-MM-DD HH:mm").toDate()}function P(e,t){return new Date(e.setFullYear(e.getFullYear()+t))}var N=Object(d.a)({dialogPaper:{minWidth:"50%",maxHeight:"40%"}})((function(e){var t=function(){e.setChangeDurationOpen(!1),e.validateChangeDuration()},n=T("Validate"),a=T("The reason is mandatory");return r.a.createElement(s.a,{"aria-labelledby":"simple-dialog-title",open:e.open,classes:{paper:e.classes.dialogPaper},onClose:function(){e.setChangeDurationOpen(!1)}},r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{id:"simple-dialog-title"},T("Change duration")),r.a.createElement(_,{label:T("Reason"),type:"text",name:"reason",value:e.reason,onChange:function(t){e.setReason(t.target.value)}}),!e.reason&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{color:"red",textAlign:"center"}},a),r.a.createElement(u.a,{readOnly:!e.reason,onClick:t,variant:"contained",color:"primary",disabled:!0},n)),e.reason&&r.a.createElement(u.a,{readOnly:!e.reason,onClick:t,variant:"contained",color:"primary"},n)))})),R=/[?&]stockLocationId=([^&#]*)/g,A=/[?&]machineTypeId=([^&#]*)/g,G=/[?&]machineId=([^&#]*)/g,z=/[?&]workCenterGroupId=([^&#]*)/g,W=/[?&]employeeId=([^&#]*)/g,Y=function(e){return function(){var t=Object(a.useState)(window.location.href),n=Object(c.a)(t,1)[0],i=Object(a.useState)(window.location.search),o=Object(c.a)(i,1)[0],l=Object(a.useState)(!1),s=Object(c.a)(l,2),d=s[0],u=s[1],p=Object(a.useState)("days"),m=Object(c.a)(p,2),h=m[0],f=m[1],v=Object(a.useState)("days"),g=Object(c.a)(v,2),b=g[0],O=g[1],_=Object(a.useState)(null),y=Object(c.a)(_,2),w=y[0],E=y[1],k=Object(a.useState)(null),x=Object(c.a)(k,2),S=x[0],C=x[1],D=Object(a.useState)(null),T=Object(c.a)(D,2),j=T[0],L=T[1],I=Object(a.useState)(null),M=Object(c.a)(I,2),P=M[0],N=M[1],Y=Object(a.useState)(null),V=Object(c.a)(Y,2),F=V[0],H=V[1];return Object(a.useEffect)((function(){var e=new URLSearchParams(o).get("planningEmployee");u(e)}),[o]),Object(a.useEffect)((function(){var e=R.exec(n),t=A.exec(n),a=G.exec(n),r=z.exec(n),i=W.exec(n);e&&(L(e[1]),f("tree"),O("withStockLocation")),i&&(H(i[1]),f("days"),O("withEmployee")),t&&(C(t[1]),f("tree"),O("withMachineType")),a&&(E(a[1]),f("days"),O("withMachine")),r&&(N(r[1]),f("tree"),O("withWorkCenterGroup"))}),[n]),w||S||j||P||F?r.a.createElement(e,{url:n,type:h,planningEmployee:d,planningViewType:b,employeeId:F,workCenterGroupId:P,stockLocationId:j,machineTypeId:S,machineId:w}):r.a.createElement("div",null,"Les param\xe8tres de l'url sont vides. ",r.a.createElement("br",null),r.a.createElement("br",null),"Les param\xe8tres attendus sont les suivants:",r.a.createElement("br",null),r.a.createElement("br",null),"- ?stockLocationId=1",r.a.createElement("br",null),"- ?machineId=1",r.a.createElement("br",null),"- ?machineTypeId=1",r.a.createElement("br",null),"- ?workCenterGroupId=1",r.a.createElement("br",null),"- ?employeeId=1")}},V=n(62),F=n(63),H=n(100),B=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var r=n[a];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}("CSRF-TOKEN"),q=new Headers;q.append("Accept","application/json"),q.append("Content-Type","application/json"),q.append("X-Requested-With","XMLHttpRequest"),q.append("X-CSRF-Token",B);var U=function(){function e(){Object(V.a)(this,e)}return Object(F.a)(e,null,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return Object(H.trackPromise)(fetch(e,t))}))},{key:"request",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({method:"POST",credentials:"include",headers:q,mode:"cors",body:JSON.stringify(a)},n);return"GET"===n.method&&delete r.body,e.fetch(t,r)}},{key:"post",value:function(t,n){return e.request(t,{method:"POST"},n)}},{key:"put",value:function(t,n){return e.request(t,{method:"PUT"},n)}},{key:"add",value:function(t,n){var a={data:n},r="".concat(e.REST_URL).concat(t);return e.put(r,a)}},{key:"getData",value:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object(p.a)(Object(p.a)({},n),a),i="".concat(e.REST_URL).concat(t,"/search");return e.post(i,r)}},{key:"update",value:function(t,n,a){var r={data:n},i="".concat(e.REST_URL).concat(t,"/").concat(a);return e.post(i,r)}},{key:"delete",value:function(t,n){var a="".concat(e.REST_URL).concat(t,"/").concat(n);return e.request(a,{method:"DELETE"})}},{key:"getId",value:function(t,n){var a="".concat(e.REST_URL).concat(t,"/").concat(n,"/fetch");return e.post(a,{})}},{key:"getAction",value:function(t,n,a){var r={model:t,action:n,data:a},i="".concat(e.ACTION_URL);return e.request(i,{},r)}}]),e}();U.REST_URL="../../ws/rest/",U.ACTION_URL="../../ws/action/";var K=U,J=["children","outlined","className"],Q=function(e){var t=e.children,n=(e.outlined,e.className),a=Object(m.a)(e,J);return r.a.createElement("div",Object.assign({className:Object(h.b)(Object(h.a)({position:"relative",width:"90%",overflow:"hidden",boxShadow:"0px 0px 2px 0 rgba(60,64,67, 0.5)",backgroundColor:"#0288d1",minWidth:"80px",minHeight:64,borderRadius:4,marginTop:"5%",marginLeft:"5%",color:"#fff",textAlign:"center"}),n)},a),t)};Q.defaultProps={children:void 0,className:void 0,outlined:!1};var X=Q,$=n(204),Z=n(105),ee=n(208),te=(n(277),function(e){var t=e.className,n=e.children;return r.a.createElement(ee.a,{className:Object(h.b)(Object(h.a)({height:"100%",width:"100%",".simplebar-track.simplebar-vertical":{width:8},".simplebar-scrollbar":{width:8,"::before":{backgroundColor:"rgba(0, 0, 0, 0.6)",width:8}}}),t)},n)});te.defaultProps={children:void 0,className:void 0};var ne=te,ae=n(209),re=n(206),ie=n(369),oe=n(366),ce=n(196),le=n.n(ce),se={container:{padding:"4px",border:"1px solid",borderRadius:"4px",transition:"border-color ease 0.2s",borderColor:"grey",":hover":{cursor:"pointer"},":focus-within, :hover":{borderColor:"blue",label:{color:"blue"}}},hasError:{borderColor:"red"},disabled:{borderColor:"grey",":focus-within, :hover":{borderColor:"grey",label:{color:"blue"}}},errorText:"red",errorTextContainer:{display:"inline-block",float:"right"},labelContainer:{overflow:"hidden",textOverflow:"ellipsis",lineHeight:"1.15rem"},select:{width:"100%",minWidth:"120px",backgroundColor:"transparent",height:"20px",padding:"0",textOverflow:"ellipsis",boxSizing:"border-box",border:"none",":disabled":{background:"transparent",boxShadow:"none",borderColor:"transparent"},":placeholder":{color:"grey"},"> div > div":{background:"transparent !important",paddingRight:"5px",padding:"0",height:"20px",lineHeight:"20px"},":before":{display:"none"},":after":{display:"none"}},selectContainer:{display:"flex",padding:"0 !important",position:"relative",width:"100%"},nativeSelectContainer:{alignItems:"center",display:"flex",width:"100%"},searchSelectButtonContainer:{flexShrink:0},clearButton:{minWidth:"18px",minHeight:"18px",borderRadius:"100%",padding:"0"},clearButtonContainer:{position:"absolute",right:"16px"},editButton:{position:"relative",minWidth:"28px",minHeight:"28px",borderRadius:"100%",padding:"0",top:"-4px"},editButtonContainer:{position:"absolute",right:"38px"},input:{display:"flex",padding:0},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflowX:"hidden",overflowY:"inherit",height:"auto"},noOptionsMessage:{padding:"8px 16px"},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,fontSize:16},paper:{position:"absolute",zIndex:1,marginTop:2,left:0,right:0,minWidth:"fit-content",maxHeight:200,overflow:"hidden",overflowY:"auto"},divider:{height:16}},de=function(e){Object(ae.a)(n,e);var t=Object(re.a)(n);function n(){var e;Object(V.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={open:!1},e.handleOpen=function(t){t.preventDefault(),e.setState({open:!e.state.open})},e.handleClose=function(){e.setState({open:!1})},e.handleChange=function(t){e.handleClose(),e.props.onChange(t.target)},e.handleClear=function(t){t.stopPropagation(),e.props.onChange(null)},e.manageOptions=function(t){var n,a=e.props.value,r=[];return t&&(r=Object.keys(t).map((function(e){var r=t[e];return(r||{}).value===(a||{}).value&&(n=r.value),{label:(r||{}).label,value:r.value}}))),{options:r,value:n}},e}return Object(F.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.value,a=t.label,i=t.canRemove,o=void 0===i||i,c=t.errorMessage,l=t.errorMessages,s=t.name,d=t.clearButtonProps,m=this.props.options,f=this.manageOptions(m),v=f.value,b=f.options;return(e=v)||(e="",n=null),null==c&&null!=l&&null!=s&&null!=l[s]&&(c=l[s]),r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{label:a},r.a.createElement("div",{className:Object(h.a)(se.selectContainer)},r.a.createElement("div",{className:Object(h.a)(se.nativeSelectContainer)},r.a.createElement(oe.a,{name:s,className:Object(h.a)(se.select),disabled:this.props.disabled,id:a,onChange:this.handleChange,onClose:this.handleClose,onOpen:this.handleOpen,open:this.state.open,value:e,readOnly:this.props.readOnly},b.map((function(e,t){return r.a.createElement(ie.a,{key:t,value:e.value},e.label)})),0===b.length&&r.a.createElement(ie.a,{key:"noItemFounds",disabled:!0},"No items found")),r.a.createElement("div",{className:Object(h.a)(se.searchSelectButtonContainer)},!this.props.disabled&&n&&o&&r.a.createElement("span",null,r.a.createElement(u.a,{className:Object(h.a)(se.clearButton),style:Object(p.a)({},d),onClick:this.handleClear,tabIndex:-1},r.a.createElement(le.a,{fontSize:"inherit"}))))))))}}]),n}(r.a.PureComponent);de.defaultProps={showLabel:!0,canRemove:!0};var ue=de,pe=function(){function e(){Object(V.a)(this,e)}return Object(F.a)(e,null,[{key:"setDragDataId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;window.localStorage.setItem(e.DATA_ID_BEING_DRAG,t)}},{key:"getDragDataId",value:function(){return window.localStorage.getItem(e.DATA_ID_BEING_DRAG)}},{key:"setActiveMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;window.localStorage.setItem(e.LAST_ACTIVE_MODE,JSON.stringify(t))}},{key:"getActiveMode",value:function(){try{var t=window.localStorage.getItem(e.LAST_ACTIVE_MODE),n={};return t&&(n=JSON.parse(t)),S(n)?null:n}catch(a){}return null}},{key:"setActiveDate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;window.localStorage.setItem(e.LAST_ACTIVE_DATE,JSON.stringify(t))}},{key:"getActiveDate",value:function(){try{var t=window.localStorage.getItem(e.LAST_ACTIVE_DATE),n={};return t&&(n=JSON.parse(t)),S(n)?null:n}catch(a){}return null}},{key:"getOperationOrders",value:function(){try{var t=window.localStorage.getItem(e.OPERATION_ORDER_EVENT_COLOR_STORE_KEY);return t?JSON.parse(t):[]}catch(n){return[]}}},{key:"setOperationOrders",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;window.localStorage.setItem(e.OPERATION_ORDER_EVENT_COLOR_STORE_KEY,JSON.stringify(t))}},{key:"getOpenStockLocations",value:function(){try{var t=window.localStorage.getItem(e.OPEN_STOCK_LOCATION_STORE_KEY);return t?JSON.parse(t):[]}catch(n){return[]}}},{key:"setOpenStockLocations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;window.localStorage.setItem(e.OPEN_STOCK_LOCATION_STORE_KEY,JSON.stringify(t))}},{key:"getOpenMachineTypes",value:function(){try{var t=window.localStorage.getItem(e.OPEN_MACHINE_TYPE_STORE_KEY);return t?JSON.parse(t):[]}catch(n){return[]}}},{key:"setOpenMachineTypes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;window.localStorage.setItem(e.OPEN_MACHINE_TYPE_STORE_KEY,JSON.stringify(t))}}]),e}();pe.OPERATION_ORDER_EVENT_COLOR_STORE_KEY="OPERATION_ORDER_EVENT_COLOR_STORE_KEY",pe.OPEN_STOCK_LOCATION_STORE_KEY="OPEN_STOCK_LOCATION_STORE_KEY",pe.OPEN_MACHINE_TYPE_STORE_KEY="OPEN_MACHINE_TYPE_STORE_KEY",pe.LAST_ACTIVE_MODE="LAST_ACTIVE_MODE",pe.LAST_ACTIVE_DATE="LAST_ACTIVE_DATE",pe.DATA_ID_BEING_DRAG="DATA_ID_BEING_DRAG";var me=pe,he=(n(280),["manufacturingOrderList","operationOrderListLength","draftOperationOrderListLength","renderDraftOperationOrder","prodHumanResourceList","onDragend"]),fe={height:"450px!important",overflow:"scroll"},ve={width:"240px",height:"auto",background:"#ffffff",color:"black",border:"none",borderRadius:"4px",fontSize:"1.1em",marginLeft:"1%",paddingTop:1,paddingLeft:12,paddingBottom:12,boxShadow:"8px 4px 8px 4px rgba(153,153,153,0.35)"},ge=function(e){e.manufacturingOrderList,e.operationOrderListLength,e.draftOperationOrderListLength;var t=e.renderDraftOperationOrder,n=(e.prodHumanResourceList,e.onDragend),i=Object(m.a)(e,he),o=Object(a.useState)(null),l=Object(c.a)(o,2),s=l[0],d=l[1],u=Object(a.useState)(""),p=Object(c.a)(u,2),h=p[0],f=p[1],v=Object(a.useState)(""),g=Object(c.a)(v,2),b=g[0],O=g[1];Object(a.useEffect)((function(){var e=[];i.workCenterGroupModelList&&i.workCenterGroupModelList.forEach((function(t){e.push({label:t.name,value:t.id})})),d(e)}),[i.workCenterGroupModelList]),Object(a.useEffect)((function(){var e=setTimeout((function(){i.setFilter(h)}),800);return function(){return clearTimeout(e)}}),[h]),Object(a.useEffect)((function(){var e=setTimeout((function(){i.setSecondFilter(b)}),800);return function(){return clearTimeout(e)}}),[b]);var y=function(e){e.dataTransfer.effectAllowed="move",me.setDragDataId(e.target.getAttribute("data-id"))},w=function(e){i.setSearchTypeSelect(String(e.currentTarget.value))},E=t.map((function(e){var t=function(e){var t=[];if(t.push("<div>"),t.push("<b> ".concat(e.manufOrder&&e.manufOrder.manufOrderSeq," - ").concat(T("Priority")," : ").concat(e.priority,"\n  </b><br /><br /> ").concat(e.operationName)),e.realDuration?t.push("<b>".concat(T("Real duration(min)")," :</b> ").concat(e.realDuration/60)):e.plannedDuration&&t.push("<b>".concat(T("Planned duration(min)")," :</b> ").concat(e.plannedDuration/60)),!1===e.isMaintained&&e.product&&t.push(e.product&&e.product.fullName),e.clientPartner&&t.push(e.clientPartner&&e.clientPartner.fullName),e.statusSelect&&t.push("<b>".concat(T("Status")," :</b> ").concat(L[e.statusSelect-1])),e.qty&&!1===e.isMaintained&&t.push("<b>".concat(T("Quantity")," :</b> ").concat(e.qty)),e.bom&&t.push("<b>".concat(T("BoM")," :</b> ").concat(e.bom)),e.prodProcess&&t.push("<b>".concat(T("Prod. Process")," :</b> ").concat(e.prodProcess)),e.manufOrder&&e.manufOrder.productionOrderSet){var n="",a=e.manufOrder.productionOrderSet.map((function(e){return e.productionOrderSeq}));a&&(n=a.join(" / ")),t.push("<b>".concat(T("Production order(s)")," :</b> ").concat(n))}if(e.manufOrder&&e.manufOrder.saleOrderSet){var r="",i=e.manufOrder.saleOrderSet.map((function(e){return e.fullName}));i&&(r=i.join(" / ")),t.push("<b>".concat(T("Sale order(s)")," :</b> ").concat(r))}return e.employees&&(t.push("<b>Human Resource List : </b>"),t.push(e.employees)),t.push("<b>".concat(T("From")," : </b> ").concat(I(e.plannedStartDateT))),t.push("<b>".concat(T("To")," : </b> ").concat(I(e.plannedEndDateT))),t.push("</div>"),t.join("<br/>")}(e),a="";return e.saleOrder&&2===e.saleOrder.sdsTypeSelect&&(a=" event_saleOrder_not_posed"),e.saleOrder&&1===e.saleOrder.sdsTypeSelect&&(a=" event_saleOrder_posed"),r.a.createElement("div",{onDragEnd:n,draggable:"true",onDragStart:y,id:"draftOperationOrder-".concat(e.id),"data-id":e.id,key:e.id},r.a.createElement($.a,{showArrow:!0,activateOn:"click",content:r.a.createElement("div",{style:ve,dangerouslySetInnerHTML:{__html:t}})},r.a.createElement(X,null,r.a.createElement("b",null,r.a.createElement("div",{style:{backgroundColor:e.headerColor,width:"100%",height:"100%",color:e.textColor}},r.a.createElement("div",{style:{display:"flex"}},e.manufOrder&&e.manufOrder.manufOrderSeq,r.a.createElement("div",{style:{position:"absolute",top:0,right:"2px"}},e.materialCode?e.materialCode.sdsCode:"")))),r.a.createElement("div",{className:a,style:{backgroundColor:e.contentColor,width:"100%",height:"100%",color:e.textColor}},r.a.createElement("div",{className:"ellipsive_content"},e.operationName,r.a.createElement("br",null),e.product&&e.product.fullName,r.a.createElement("br",null),e.clientPartner&&e.clientPartner.fullName,r.a.createElement("br",null))))))})),k=T("Operations order to plan"),x=T("Filter on"),S=T("Left"),C=T("Right"),D=T("All");return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{textAlign:"center",color:"#0288d1"}},k),r.a.createElement("h5",{style:{textAlign:"center",color:"#0288d1",marginBottom:0}},x),r.a.createElement(Z.a,{value:"left",checked:"left"===i.searchTypeSelect,onChange:w},S),r.a.createElement(Z.a,{value:"right",checked:"right"===i.searchTypeSelect,onChange:w},C),r.a.createElement(Z.a,{value:"all",checked:"all"===i.searchTypeSelect,onChange:w},D),r.a.createElement(_,{label:T("Filter (product, customer, ...)"),type:"text",name:"filter",value:h,onChange:function(e){f(e.target.value)}}),r.a.createElement(_,{label:T("Filter (product, customer, ...)"),type:"text",name:"secondFilter",value:b,onChange:function(e){O(e.target.value)}}),s&&s.length>0&&r.a.createElement(ue,{name:"filterByWorkCenterGroup",label:T("Filter by work center group"),value:i.workCenterGroup,options:s,onChange:function(e){if(s){var t=e?s.find((function(t){return t.value===e.value})):null;i.setWorkCenterGroup(t)}},canRemove:!0}),r.a.createElement(ne,{style:{height:"100%"}},r.a.createElement("div",{style:fe},E)))},be=function(e){return function(t){var n=Object(a.useState)({machineList:null,employeeList:null,dayPlanningList:null,workCenterGroupId:t.workCenterGroupId,workCenterGroupModelList:null,renderOperationOrder:null,renderDraftOperationOrder:null,manageChangeDuration:!1,workCenterGroupName:null}),i=Object(c.a)(n,2),o=i[0],l=i[1],s=Object(a.useState)(null),d=Object(c.a)(s,2),u=d[0],m=d[1],h=Object(a.useState)(""),f=Object(c.a)(h,2),v=f[0],g=f[1],b=Object(a.useState)(""),O=Object(c.a)(b,2),_=O[0],y=O[1],k=Object(a.useState)(!1),x=Object(c.a)(k,2),S=x[0],C=x[1],D=Object(a.useState)(!1),j=Object(c.a)(D,2),L=j[0],I=j[1],M=Object(a.useState)(!1),P=Object(c.a)(M,2),N=P[0],R=P[1],A=Object(a.useState)("left"),G=Object(c.a)(A,2),z=G[0],W=G[1],Y=function(){var e=Object(E.a)(w.a.mark((function e(){var n,a,r,i,o,c,s,d;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),n=[],a=[],r=[],i=[],e.next=7,K.getAction("com.axelor.apps.production.db.OperationOrder","com.axelor.apps.production.pro.web.PlanificationController:initData",{machineId:t.machineId,employeeId:t.employeeId,stockLocationId:t.stockLocationId,machineTypeId:t.machineTypeId,search:v,secondSearch:_,searchTypeSelect:z,planningEmployee:t.planningEmployee||!1,workCenterGroupId:t.workCenterGroupId||(u||{}).value});case 7:return o=e.sent,e.next=10,o.json();case 10:c=e.sent,s=c.data,(d=void 0===s?{}:s)&&d.machineList&&(n=d.machineList.sort((function(e,t){return e.id-t.id}))),d&&d.employeeList&&(a=d.employeeList.sort((function(e,t){return e.id-t.id}))),d.renderOperationOrder&&(r=d.renderOperationOrder.filter((function(e){return!e.isMicroPlanningDone})),i=d.renderOperationOrder.filter((function(e){return e.isMicroPlanningDone}))),l({machineList:n,employeeList:a,dayPlanningList:d.dayPlanningList,workCenterGroupModelList:d.workCenterGroupModelList,renderOperationOrder:i,renderDraftOperationOrder:r,manageChangeDuration:d.manageChangeDuration,workCenterGroupId:t.workCenterGroupId||(u||{}).value,workCenterGroupName:d.workCenterGroupName}),C(!1);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(E.a)(w.a.mark((function e(){var n,a,r,i,c,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),n=[],a=[],e.next=5,K.getAction("com.axelor.apps.production.db.OperationOrder","com.axelor.apps.production.pro.web.PlanificationController:initStaticData",{machineId:t.machineId,employeeId:t.employeeId,stockLocationId:t.stockLocationId,machineTypeId:t.machineTypeId,workCenterGroupId:t.workCenterGroupId});case 5:return r=e.sent,e.next=8,r.json();case 8:i=e.sent,c=i.data,(s=void 0===c?{}:c)&&s.machineList&&(n=s.machineList.sort((function(e,t){return e.id-t.id}))),s&&s.employeeList&&(a=s.employeeList.sort((function(e,t){return e.id-t.id}))),l(Object(p.a)(Object(p.a)({},o),{},{machineList:n,employeeList:a,dayPlanningList:s.dayPlanningList||[],workCenterGroupModelList:s.workCenterGroupModelList||[],manageChangeDuration:s.manageChangeDuration,workCenterGroupId:t.workCenterGroupId||(u||{}).value,workCenterGroupName:s.workCenterGroupName})),C(!1);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(E.a)(w.a.mark((function e(){var n,a,r,i,c,s,d,m,h,f,g,b,O,y,E,k;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.machineList&&!o.employeeList||S){e.next=40;break}if(n=o.machineList.map((function(e){return e.id})),a=o.employeeList.map((function(e){return e.id})),!n||0!==n.length||!a||0!==a.length){e.next=12;break}r=window,i=r.dhtmlx,t.machineTypeId&&i.alert({text:T("Warning ! We cannot find any machine with this type of machine, or any machine that has a work center set.")}),t.machineId&&i.alert({text:T("Warning ! The work center on the machine is not set.")}),t.employeeId&&i.alert({text:T("Warning ! The employee cannot be retrieve.")}),t.stockLocationId&&i.alert({text:T("Warning ! We cannot find any machine or employee within this stock location, or any machine that has a work center set.")}),t.workCenterGroupId&&i.alert({text:T("Warning ! We cannot find any machine or employee for this work center group.")}),e.next=40;break;case 12:if(!(!t.planningEmployee&&n&&n.length>0)){e.next=27;break}return e.next=15,K.getAction("com.axelor.apps.production.db.OperationOrder","com.axelor.apps.production.pro.web.PlanificationController:initOperationData",{machineIds:n||[],employeeIds:null,search:v,secondSearch:_,searchTypeSelect:z,planningEmployee:t.planningEmployee||!1,workCenterGroupId:t.workCenterGroupId||(u||{}).value});case 15:return c=e.sent,e.next=18,c.json();case 18:s=e.sent,d=s.data,h=[],f=[],(m=void 0===d?{}:d).renderOperationOrder&&(h=m.renderOperationOrder.filter((function(e){return!e.isMicroPlanningDone})),f=m.renderOperationOrder.filter((function(e){return e.isMicroPlanningDone}))),l(Object(p.a)(Object(p.a)({},o),{},{renderOperationOrder:f,renderDraftOperationOrder:h})),e.next=40;break;case 27:if(!(a&&a.length>0)){e.next=40;break}return e.next=30,K.getAction("com.axelor.apps.production.db.OperationOrder","com.axelor.apps.production.pro.web.PlanificationController:initOperationData",{machineIds:null,employeeIds:a||[],search:v,secondSearch:_,searchTypeSelect:z,planningEmployee:t.planningEmployee||!1,workCenterGroupId:t.workCenterGroupId||(u||{}).value});case 30:return g=e.sent,e.next=33,g.json();case 33:b=e.sent,O=b.data,E=[],k=[],(y=void 0===O?{}:O).renderOperationOrder&&(E=y.renderOperationOrder.filter((function(e){return!e.isMicroPlanningDone})),k=y.renderOperationOrder.filter((function(e){return e.isMicroPlanningDone}))),l(Object(p.a)(Object(p.a)({},o),{},{renderOperationOrder:k,renderDraftOperationOrder:E}));case 40:C(!1),R(!1),I(!1);case 43:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(t.machineTypeId||t.machineId||t.stockLocationId||t.workCenterGroupId||t.employeeId)&&V()}),[t.machineId,t.employeeId,t.machineTypeId,t.stockLocationId,t.workCenterGroupId]),Object(a.useEffect)((function(){(o.machineList||o.employeeList)&&F()}),[o.employeeList,o.machineList,v,_,u,z,t.planningEmployee]),Object(a.useEffect)((function(){S&&Y()}),[S]),Object(a.useEffect)((function(){N&&F()}),[N]),o||o.renderOperationOrder||o.machineList||o.employeeList||o.workCenterGroupModelList||o.renderDraftOperationOrder||o.dayPlanningList||t.machineTypeId||t.machineId||t.employeeId||t.stockLocationId||t.workCenterGroupId?r.a.createElement(e,Object.assign({renderData:o,setReload:C,setReloadOperations:R,workCenterGroup:u,workCenterGroupId:t.workCenterGroupId,setWorkCenterGroup:m,filter:v,setFilter:g,secondFilter:_,setSecondFilter:y,loading:L,searchTypeSelect:z,setSearchTypeSelect:W,planningEmployee:t.planningEmployee},t)):null}},Oe=function(e){return function(t){return Object(a.useEffect)((function(){var e=window.scheduler;e.config.serverLists={},t.planningEmployee&&t.renderData.employeeList?e.serverList("sections",t.renderData.employeeList):(t.renderData.machineList&&e.serverList("sections",t.renderData.machineList),t.renderData.employeeList&&e.serverList("sections",t.renderData.employeeList))}),[t.renderData.machineList,t.renderData.employeeList,t.planningEmployee]),t.renderData.renderOperationOrder||t.renderData.renderDraftOperationOrder?r.a.createElement(e,t):null}},_e=n(200),ye=n(205),we=n(207),Ee=function(e,t,n){K.getId("com.axelor.apps.production.db.OperationOrder",t).then((function(a){a.json().then((function(a){var r=a.data;r&&r.length&&(e.version=r[0].version,K.update("com.axelor.apps.production.db.OperationOrder",e,t).then((function(e){n(!0)})))}))}))},ke=function(){var e=Object(E.a)(w.a.mark((function e(t,n,a,r,i,o,c,l){var s,d,u,p,m,h,f,v,g,b,O;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(""),s=window,d=s.dhtmlx,u={plannedStartDateT:n,plannedEndDateT:a},e.next=5,K.getId("com.axelor.apps.production.db.OperationOrder",t);case 5:return p=e.sent,e.next=8,p.json();case 8:if(m=e.sent,!(h=m.data)||!h.length){e.next=23;break}return u.version=h[0].version,e.next=14,K.update("com.axelor.apps.production.db.OperationOrder",u,t);case 14:return f=e.sent,e.next=17,f.json();case 17:if(v=e.sent,g=v.status,b=v.data,-1!==g){e.next=22;break}return d.alert({text:"Une erreur est survenue: ".concat(b.message)}),e.abrupt("return",null);case 22:b&&b.length&&(O={oldStartDate:M(h[0].plannedStartDateT),oldEndDate:M(h[0].plannedEndDateT),id:t,reason:i},l?O.machineId=r:O.employeeId=r,K.getAction("com.axelor.apps.production.db.OperationOrder","com.axelor.apps.sd.web.OperationOrderControllerSD:updateOperationOrderDateAndMachine",O).then((function(){o(!0)})));case 23:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,o,c,l){return e.apply(this,arguments)}}(),xe=function(){var e=Object(E.a)(w.a.mark((function e(t,n,a,r,i){var o,c,l,s,d,u,m,h,f,v,g;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=window,c=o.dhtmlx,l={},l=i?{plannedStartDateT:r,machine:{id:n},workCenter:{id:a}}:{plannedStartDateT:r,sdsEmployee:{id:n}},e.next=5,K.getId("com.axelor.apps.production.db.OperationOrder",t);case 5:return s=e.sent,e.next=8,s.json();case 8:if(d=e.sent,!(u=d.data)||!u.length){e.next=27;break}return l.version=u[0].version,e.next=14,K.update("com.axelor.apps.production.db.OperationOrder",l,t);case 14:return m=e.sent,e.next=17,m.json();case 17:if(h=e.sent,f=h.status,v=h.data,-1!==f){e.next=22;break}return c.alert({text:"Une erreur est survenue: ".concat(v.message)}),e.abrupt("return",null);case 22:if(!v||!v.length){e.next=27;break}return g={context:Object(p.a)({},v[0])},e.next=26,K.getAction("com.axelor.apps.production.db.OperationOrder","com.axelor.apps.production.pro.web.ProProductionOrderController:plan",g);case 26:return e.abrupt("return",e.sent);case 27:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),Se=[T("Draft"),T("Canceled"),T("Planned"),T("In progress"),T("Standby"),T("Finished")],Ce=function(){var e=window.scheduler,t=e.date.date_to_str("%M %j");e.templates.day_date=function(e){return function(e){return x()(e).format("DD/MM/YYYY")}(e)},e.templates.week_timeline_scale_date=function(e){return"<br/>"+t(e)},e.templates.month_timeline_scale_date=function(e){return function(e){switch(e.getDay()){case 0:return"Su";case 1:return"Mo";case 2:return"Tu";case 3:return"We";case 4:return"Th";case 5:return"Fr";case 6:return"Sa";default:return""}}(e)+"<br/>"+e.getDate()},e.calculateDuration=function(e){return Math.round((e.end_date-e.start_date)/36e5)}},De=function(e,t,n){var a=window.scheduler;a.config.serverLists.timeline="sections";var r=n||new Date,i=t||5,o=(60*r.getHours()+(r.getMinutes()-r.getMinutes()%5)-10)/i;a.createTimelineView({fit_events:!0,name:"timeline",x_unit:"minute",x_date:"%H:%i",x_step:i,x_size:16,x_start:o,x_length:14,render:e,scrollable:!0,column_width:70,smart_rendering:!0,folder_dy:40,full_event__dy:!0,event_dy:100,dy:80,y_unit:a.serverList("sections"),y_property:"section_id",section_autoheight:!1,resize_events:!1})},Te=function(e,t,n){var a=window.scheduler;a.config.serverLists.week_timeline="sections",a.createTimelineView({fit_events:!0,name:"week_timeline",render:e,folder_events_available:!1,x_unit:"day",x_date:"%M %j",x_step:1,x_size:7,x_length:7,column_width:70,smart_rendering:!0,folder_dy:40,full_event__dy:!0,event_dy:100,dy:80,y_unit:a.serverList("sections"),y_property:"section_id",section_autoheight:!1,resize_events:!1,scrollable:!0}),a.date.week_timeline_start=a.date.week_start,t&&a.date.add(t,n,"week")},je=function(e,t,n){var a=window.scheduler;a.config.serverLists.month_timeline="sections",a.createTimelineView({fit_events:!0,resize_events:!1,name:"month_timeline",render:e,x_unit:"day",x_date:"%D %j",x_step:1,x_size:14,x_length:7,column_width:70,smart_rendering:!0,folder_dy:40,full_event__dy:!0,event_dy:100,dy:80,y_unit:a.serverList("sections"),y_property:"section_id",section_autoheight:!1}),a.date.month_timeline_start=a.date.month_start,t&&a.date.add(t,n,"month")},Le=function(e,t){t.serverList("sections",e.slice())},Ie=function(e,t,n){e=Object.values(e).map((function(e){var t={id:e.id,key:e.name,label:e.name};return e.employees&&(t.children=Object.values(e.employees||{}).map((function(t){return Object(p.a)(Object(p.a)(Object(p.a)({},e),t),{},{label:"".concat(t.name),key:t.id})}))),e.machines&&(t.children=Object.values(e.machines||{}).map((function(t){return Object(p.a)(Object(p.a)(Object(p.a)({},e),t),{},{label:"".concat(t.name," - ").concat(t.serialNumber),key:t.id})}))),t})),"withStockLocation"===n?function(e,t){var n=me.getOpenStockLocations(),a=Object.keys(n).map((function(e){return n[e]}));e.forEach((function(e){var t=n[e.id];t?e.open=t.open:a.push({id:e.id,open:!1})})),Le(e,t),me.setOpenStockLocations(C(a))}(e,t):function(e,t){var n=me.getOpenMachineTypes(),a=Object.keys(n).map((function(e){return n[e]}));e.forEach((function(e){var t=n[e.id];t?e.open=t.open:a.push({id:e.id,open:!1})})),Le(e,t),me.setOpenMachineTypes(C(a))}(e,t)};function Me(e,t){var n=window.dhtmlx;e?n.alert({text:T("Warning ! The machine is under maintenance during this period.")}):t&&n.alert({text:T("Warning! You are about to drop an operation outside of the activity schedule of the machine.")})}var Pe=function(e,t,n,a,r,i){var o=window,c=o.scheduler,l=o.dhtmlx;return c.attachEvent("onBeforeEventChanged",function(){var o=Object(E.a)(w.a.mark((function o(s,d,u,p){var m;return w.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(r({move:null,id:null}),!c.checkInMarkedTimespan(c.getEvent(s.id),"previous_operation")){o.next=10;break}return l.alert({text:T("Warning! You are about to reschedule an operation during a previous operation.")}),c.getEvent(s.id).start_date=p.start_date,c.getEvent(s.id).end_date=p.end_date,c.getEvent(s.id).section_id=p.section_id,c.updateEvent(s.id),o.abrupt("return",!1);case 10:if(!c.checkInMarkedTimespan(c.getEvent(s.id),"unauthorized_machine")){o.next=17;break}return l.alert({text:T("Warning! You are about to reschedule an operation with an unauthorized machine.")}),c.getEvent(s.id).start_date=p.start_date,c.getEvent(s.id).end_date=p.end_date,c.getEvent(s.id).section_id=p.section_id,c.updateEvent(s.id),o.abrupt("return",!1);case 17:if(!0!==p.isMaintained){o.next=25;break}if(s.section_id===p.section_id){o.next=22;break}return o.abrupt("return",!1);case 22:return o.abrupt("return",!0);case 23:o.next=32;break;case 25:if(!s.id){o.next=32;break}if(s.section_id===p.section_id&&s.start_date.getTime()===p.start_date.getTime()&&s.end_date.getTime()===p.end_date.getTime()){o.next=31;break}return a?ke(s.id,s.start_date,s.end_date,s.section_id,e,t,n,i):(m={plannedStartDateT:s.start_date,plannedEndDateT:s.end_date},!1===s.isMaintained&&(i?m.machine={id:s.section_id}:m.sdsEmployee={id:s.section_id}),Ee(m,s.id,t)),o.abrupt("return",!0);case 31:return o.abrupt("return",!1);case 32:case"end":return o.stop()}}),o)})));return function(e,t,n,a){return o.apply(this,arguments)}}())},Ne=function(e,t,n,a,r){var i=[],o=window.scheduler,c=o.attachEvent("onSchedulerReady",(function(){var e=o.date.date_to_str("%H:%i");o.templates.hour_scale=function(t){return e(t)}}));i.push(c);var l=o.attachEvent("onEventDrag",(function(e,t,n){"move"===t&&r({move:!0,id:e})}));i.push(l);var s=o.attachEvent("onViewChange",(function(t,n){e(t)}));i.push(s);var d=o.attachEvent("onBeforeViewChange",(function(e,t,n,a){var r=x()(a).toDate();if("month_timeline"===n){var i=r.getFullYear(),c=r.getMonth()+1,l=new Date(i,c,0).getDate();o.matrix.month_timeline.x_size=l,o.matrix.month_timeline.x_length=l}return!0}));i.push(d);var u=o.attachEvent("onBeforeLightbox",(function(e){return!1}));i.push(u);var p=o.attachEvent("onBeforeEventCreated",(function(e){return!1}));i.push(p);var m=o.attachEvent("onSchedulerResize",(function(){o.setCurrentView()}));i.push(m);var h=o.attachEvent("onBeforeDrag",(function(e,t,n){var a=o.getEvent(e);return!("resize"===t&&!a.changeDuration)&&(!a||!0!==a.isPinned&&6!==a.statusSelect&&4!==a.statusSelect)}));i.push(h);var f=o.attachEvent("onClick",(function(e){var n=o.getEvent(e);!function(){var e=window.scheduler;e.hideQuickInfo(),e._quick_info_box=null}();var a=[];return n.isMaintained||(3===n.statusSelect&&(!0===n.isPinned?a.push("icon_free"):a.push("icon_freeze"),3===n.statusSelect&&a.push("icon_start")),4===n.statusSelect&&a.push("icon_end"),4!==n.statusSelect&&6!==n.statusSelect&&a.push("icon_delete"),t&&n&&!1===n.isPinned&&!n.changeDuration&&6!==n.statusSelect&&4!==n.statusSelect&&a.push("icon_change_duration")),o.config.icons_select=a,o.showQuickInfo(e),!0}));i.push(f);var v=o.attachEvent("onDragEnd",(function(e,t,n){var a=o.getEvent(e);Me(o.checkInMarkedTimespan(a,"maintenance"),o.checkInMarkedTimespan(a,"planning"))}));i.push(v);var g=o.attachEvent("onEventCollision",(function(e,t){var n=!0;return t.forEach((function(e){var t=o.checkInMarkedTimespan(e,"blocked"),a=o.checkInMarkedTimespan(e,"maintenance"),r=o.checkInMarkedTimespan(e,"planning");t&&(n=!1),Me(a,r)})),n}));return i.push(g),i},Re=function(e,t,n){var a=window.scheduler,r=Object(we.a)(t);return e&&e.forEach((function(e){var i=e.actionSelect,o=e.requestDate,c=e.doneOn,l=e.expectedDate,s=e.equipementMaintenance,d=n&&n.find((function(e){return e.id===s.id})),u=d&&d.machine&&d.machine.id;if(u)if(1===i){var p={days:x()(c||l).toDate(),zones:"fullday",css:"red_section",sections:{timeline:u,week_timeline:u,month_timeline:u},type:"maintenance"};a.deleteMarkedTimespan(p),a.addMarkedTimespan(p),t.push(p)}else{var m={days:function(e,t){for(var n=[e,t],a=x()(e).startOf("day"),r=x()(t).startOf("day");a.add(1,"days").diff(r)<0;)n.push(a.clone().toDate());return n}(x()(o).toDate(),x()(c||l).toDate()),zones:"fullday",css:"red_section",sections:{timeline:u,week_timeline:u,month_timeline:u},type:"maintenance"};a.deleteMarkedTimespan(m),a.addMarkedTimespan(m),r.push(m)}})),r},Ae=function(e,t,n,a){var r=[];if(n){if("event"===a){var i="";n.product&&n.product.fullName&&n.product.code&&(i=n.product.fullName.replace("[".concat(n.product.code,"]"),""));var o=function(e){var t,n="";return e.manufOrder&&(t=e.manufOrder.prioritySelect),!0===e.isMaintained&&!1===e.isPinned?n+="event_maintenance":!0===e.isMaintained&&!0===e.isPinned?n+="event_maintenance_freeze":4===t&&!1===e.isPinned&&!1===e.isMaintained?n+="event_danger":3===t&&!1===e.isPinned&&!1===e.isMaintained?n+="event_warning":2===t&&!1===e.isPinned&&!1===e.isMaintained?n+="event_primary":1===t&&!1===e.isPinned&&!1===e.isMaintained?n+="event_normal":4===t&&!0===e.isPinned&&!1===e.isMaintained?n+="event_danger_freeze":3===t&&!0===e.isPinned&&!1===e.isMaintained?n+="event_warning_freeze":2===t&&!0===e.isPinned&&!1===e.isMaintained?n+="event_primary_freeze":1===t&&!0===e.isPinned&&!1===e.isMaintained?n+="event_normal_freeze":null===t&&(n+="event_usual"),4===e.statusSelect&&!1===e.isMaintained&&e.saleOrder&&1===e.saleOrder.sdsTypeSelect?n+=" event_in_progress_posed":4===e.statusSelect&&!1===e.isMaintained&&e.saleOrder&&2===e.saleOrder.sdsTypeSelect?n+=" event_in_progress_not_posed":4===e.statusSelect&&!1===e.isMaintained&&(n+=" event_in_progress"),6===e.statusSelect&&!1===e.isMaintained&&(n+=" event_finished"),e.saleOrder&&2===e.saleOrder.sdsTypeSelect&&6!==e.statusSelect&&4!==e.statusSelect&&(n+=" event_saleOrder_not_posed"),e.saleOrder&&1===e.saleOrder.sdsTypeSelect&&6!==e.statusSelect&&4!==e.statusSelect&&(n+=" event_saleOrder_posed"),n}(n);r.push('\n        <div className="container" style="height: 100%; width: 100%">\n          <div className="header" style="margin-left: -0.75%; background-color: '.concat(n.headerColor,'">\n            ').concat(n.manufOrder&&n.manufOrder.manufOrderSeq,'\n            <div style="position: absolute; top: 0; right: 2px;">\n              ').concat(n.materialCode?n.materialCode.sdsCode:"",'\n            </div>\n          </div>\n          <div class="dhx_cal_event_line ').concat(o,'" className="mainbody" style=" z-index=-100000!important; height: 100%; background-color: ').concat(n.contentColor,'; color: black">\n            ').concat(n.operationName,"\n            <br />\n            ").concat(n.product&&n.product.code?"[".concat(n.product.code,"]"):"","\n            <br />\n            ").concat(i,"\n            <br />\n            ").concat(n.clientPartner&&n.clientPartner.fullName?n.clientPartner.fullName:"","\n          </div>\n        </div>\n      "))}if("tooltip"===a){if(r.push('<b>\n      <div >\n        <div  style="margin-top: 0%; margin-left: 1%;">\n          '.concat(n.manufOrder&&n.manufOrder.manufOrderSeq,'\n          <div style="position: absolute; top: 0; right: 2px;">').concat(n.materialCode?n.materialCode.sdsCode:"","</div>\n        </div>\n      </div>\n    </b>")),!1===n.isMaintained&&n.product&&r.push(n.product&&n.product.fullName),n.clientPartner&&r.push(n.clientPartner&&n.clientPartner.fullName),n.statusSelect&&r.push("<b>".concat(T("Status")," :</b> ").concat(Se[n.statusSelect-1])),n.qty&&!1===n.isMaintained&&r.push("<b>".concat(T("Quantity")," :</b> ").concat(n.qty)),n.manufOrder.prioritySelect&&!1===n.isMaintained){var c="Faible";2===n.manufOrder.prioritySelect&&(c="Normal"),3===n.manufOrder.prioritySelect&&(c="\xc9lev\xe9"),4===n.manufOrder.prioritySelect&&(c="Urgent"),r.push("<b>".concat(T("Priority")," :</b> ").concat(c))}if(n.realDuration?r.push("<b>".concat(T("Real duration(min)")," :</b> ").concat(n.realDuration/60)):n.plannedDuration&&r.push("<b>".concat(T("Planned duration(min)")," :</b> ").concat(n.plannedDuration/60)),n.bom&&r.push("<b>".concat(T("BoM")," :</b> ").concat(n.bom)),n.prodProcess&&r.push("<b>".concat(T("Prod. Process")," :</b> ").concat(n.prodProcess)),n.manufOrder&&n.manufOrder.productionOrderSet){var l="",s=n.manufOrder.productionOrderSet.map((function(e){return e.productionOrderSeq}));s&&(l=s.join(" / ")),r.push("<b>".concat(T("Production order(s)")," :</b> ").concat(l))}if(n.manufOrder&&n.manufOrder.saleOrderSet){var d="",u=n.manufOrder.saleOrderSet.map((function(e){return e.fullName}));u&&(d=u.join(" / ")),r.push("<b>".concat(T("Sale order(s)")," :</b> ").concat(d))}n.outsourcing&&r.push("<b>".concat(T("Outsourcing")," :</b> ").concat(n.outsourcing)),n.employees&&(r.push("<b>Human Resource List : </b>"),r.push(n.employees)),r.push("<b>".concat(T("From")," : </b> ").concat(j(e))),r.push("<b>".concat(T("To")," : </b> ").concat(j(t)))}}return r.join("<br>")},Ge=function(){var e=Object(E.a)(w.a.mark((function e(t,n,a,r,i,o){var c,l,s,d;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=window,l=c.dhtmlx,e.next=3,xe(n,t,a,r,o);case 3:if(!(s=e.sent)){e.next=9;break}return e.next=7,s.json();case 7:(d=e.sent)&&d.data&&d.data[0]&&d.data[0].flash?l.alert({text:T("Warning! You are about to drop an operation outside of the activity schedule of the machine.")}):i(!0);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,o){return e.apply(this,arguments)}}(),ze=function(){var e=Object(E.a)(w.a.mark((function e(t,n,a){var r,i,o,c,l,s,d,u,p,m,h;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window,i=r.scheduler,e.next=3,K.getAction("com.axelor.apps.production.db.OperationOrder","com.axelor.apps.production.pro.web.ProProductionOrderController:getAuthorizedMachineAndPreviousOperation",t);case 3:return o=e.sent,e.next=6,o.json();case 6:c=e.sent,l=c.data,d=(s=void 0===l?{}:l).lastOperationOrder,u=s.machineIds,p=P(new Date,1),m=P(new Date,-1),n&&(h=[],n.forEach((function(e){if(u.includes(e.id)){if(d){var t=new Date(d.realEndDateT||d.plannedEndDateT),n=P(new Date(d.realEndDateT||d.plannedEndDateT),-1),a=i.addMarkedTimespan({start_date:n,end_date:t,zones:"fullday",css:"gray_section",type:"previous_operation",sections:{timeline:e.id,week_timeline:e.id,month_timeline:e.id}});h.push(a)}}else{var r=i.addMarkedTimespan({start_date:m,end_date:p,zones:"fullday",css:"gray_section",type:"unauthorized_machine",sections:{timeline:e.id,week_timeline:e.id,month_timeline:e.id}});h.push(r)}})),a(h)),console.debug("updateView"),i.updateView();case 16:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),We=Object(d.a)({position:"fixed",zIndex:999,height:"2em",width:"2em",overflow:"show",margin:"auto",top:0,left:0,bottom:0,right:0})((function(e){return Object(H.usePromiseTracker)().promiseInProgress||e.loading?r.a.createElement("div",{className:"loading"},"Loading\u2026"):null})),Ye=[{label:"5 min",name:"5",value:5},{label:"15 min",name:"15",value:15},{label:"30 min",name:"30",value:30},{label:"1h",name:"60",value:60},{label:"2h",name:"120",value:120},{label:"4h",name:"240",value:240},{label:"8h",name:"480",value:480}];var Ve=Object(_e.a)(Y,be,Oe)((function(e){var t=Object(a.useState)([]),n=Object(c.a)(t,2),i=n[0],o=n[1],l=Object(a.useState)([]),s=Object(c.a)(l,2),d=s[0],u=s[1],p=Object(a.useState)(null),m=Object(c.a)(p,2),h=m[0],f=m[1],v=Object(a.useState)([]),g=Object(c.a)(v,2),b=g[0],O=g[1],_=Object(a.useState)([]),y=Object(c.a)(_,2),w=y[0],E=y[1],k=Object(a.useState)(!1),x=Object(c.a)(k,2),S=x[0],C=x[1],j=Object(a.useState)(null),L=Object(c.a)(j,2),I=L[0],M=L[1],P=Object(a.useState)(me.getActiveMode()||"timeline"),R=Object(c.a)(P,2),A=R[0],G=R[1],z=Object(a.useState)(5),W=Object(c.a)(z,2),Y=W[0],V=W[1],F=Object(a.useState)(!1),H=Object(c.a)(F,2),B=H[0],q=H[1],U=Object(a.useState)(null),J=Object(c.a)(U,2),Q=J[0],X=J[1],$=Object(a.useState)(""),Z=Object(c.a)($,2),ee=Z[0],te=Z[1],ne=Object(a.useState)({move:!1,id:null}),ae=Object(c.a)(ne,2),re=ae[0],ie=ae[1];Object(a.useEffect)((function(){var t,n=window.scheduler,a=Y||5,r=new Date(n.getState().date);oe(),function(){var e=window.scheduler;e.config.multi_day=!1,e.xy.scale_height=70,e.config.server_utc=!1,e.config.active_link_view="timeline",e.locale.labels.dhx_cal_today_button=T("Today"),e.locale.labels.week_timeline_tab=T("Week"),e.locale.labels.month_timeline_tab=T("Month"),e.locale.labels.minute_timeline_tab=T("Minute"),e.locale.labels.timeline_tab=T("Day"),e.locale.labels.section_custom="Section",e.locale.labels.year_tab=T("Year"),e.config.details_on_create=!0,e.config.details_on_dblclick=!0,e.config.dblclick_create=!1,e.config.xml_date="%Y-%m-%d %H:%i",e.config.limit_time_select=!0,e.config.first_hour=0,e.config.last_hour=22,e.config.time_step=5,e.config.container_autoresize=!1,e.config.select=!1,e.locale.labels.icon_freeze=T("Freeze"),e.locale.labels.icon_free=T("Unfreeze"),e.locale.labels.icon_start=T("Start"),e.locale.labels.icon_end=T("End"),e.locale.labels.icon_delete=T("Unplan"),e.locale.labels.icon_change_duration=T("Modify duration"),e.config.quick_info_detached=!0}(),function(e,t,n,a,r){if(console.debug("planningEmployee",r),n.machineList||n.employeeList){var i=window.scheduler;i.initPlanning=function(){if("tree"===e&&"withStockLocation"===t){var o={};r?n.employeeList&&n.employeeList.forEach((function(e){var t=Object.assign({employees:[]},o[e.sdsWorkshop.id]||e.sdsWorkshop);t.employees.push(e),o[t.id]=t})):n.machineList&&n.machineList.forEach((function(e){var t=Object.assign({machines:[]},o[e.stockLocation.id]||e.stockLocation);t.machines.push(e),o[t.id]=t})),Ie(o,i,"withStockLocation")}else if("tree"===e&&"withWorkCenterGroup"===t){var c={};n.machineList&&n.machineList.forEach((function(e){var t=Object.assign({machines:[]},c[a]||{id:a,name:n.workCenterGroupName});t.machines.push(e),c[t.id]=t})),n.employeeList&&n.employeeList.forEach((function(e){var t=Object.assign({employees:[]},c[a]||{id:a,name:n.workCenterGroupName});t.employees.push(e),c[t.id]=t})),Ie(c,i,"withWorkCenterGroup")}else if("tree"===e&&"withMachineType"===t){var l={};n.machineList&&n.machineList.forEach((function(e){var t=Object.assign({machines:[]},l[e.machineType.id]||e.machineType);t.machines.push(e),l[t.id]=t})),Ie(l,i,"withMachineType")}else n.machineList&&n.machineList.length>0?(n.machineList.forEach((function(e){e.key=e.id,e.label="".concat(e.name," - ").concat(e.serialNumber),e.section_id=e.id})),i.serverList("sections",n.machineList)):n.employeeList&&n.employeeList.length>0&&(n.employeeList.forEach((function(e){e.key=e.id,e.label="".concat(e.name," "),e.section_id=e.id})),i.serverList("sections",n.employeeList))},i.initPlanning()}}(e.type,e.planningViewType,e.renderData,e.workCenterGroupId,e.planningEmployee),(t=r)instanceof Date&&!isNaN(t)?(De(e.type,a,r),Te(e.type,a,r),je(e.type,a,r)):(De(e.type),Te(e.type),je(e.type));var i=Ne(G,e.renderData.manageChangeDuration,e.renderData.machineList,0,ie);u(i),h&&n.detachEvent(h);var c=e.renderData.machineList&&e.renderData.machineList.length>0,l=Pe(ee,e.setReloadOperations,te,e.renderData.manageChangeDuration,ie,c);f(l),function(e){var t=window.scheduler;t.attachEvent("onTemplatesReady",(function(){Ce(),t.templates.event_bar_text=function(e,t,n){return Ae(e,t,n,"event")},t.templates.tooltip_text=function(e,t,n){return Ae(e,t,n,"tooltip")},t.templates.event_class=function(e,t,n){var a,r="";return n.manufOrder&&(a=n.manufOrder.prioritySelect),!0===n.isMaintained&&!1===n.isPinned?r+="event_maintenance":!0===n.isMaintained&&!0===n.isPinned?r+="event_maintenance_freeze":4===a&&!1===n.isPinned&&!1===n.isMaintained?r+="event_danger":3===a&&!1===n.isPinned&&!1===n.isMaintained?r+="event_warning":2===a&&!1===n.isPinned&&!1===n.isMaintained?r+="event_primary":1===a&&!1===n.isPinned&&!1===n.isMaintained?r+="event_normal":4===a&&!0===n.isPinned&&!1===n.isMaintained?r+="event_danger_freeze":3===a&&!0===n.isPinned&&!1===n.isMaintained?r+="event_warning_freeze":2===a&&!0===n.isPinned&&!1===n.isMaintained?r+="event_primary_freeze":1===a&&!0===n.isPinned&&!1===n.isMaintained?r+="event_normal_freeze":null===a&&(r+="event_usual"),4===n.statusSelect&&!1===n.isMaintained&&n.saleOrder&&1===n.saleOrder.sdsTypeSelect?r+=" event_in_progress_posed":4===n.statusSelect&&!1===n.isMaintained&&n.saleOrder&&2===n.saleOrder.sdsTypeSelect?r+=" event_in_progress_not_posed":4===n.statusSelect&&!1===n.isMaintained&&(r+=" event_in_progress"),6===n.statusSelect&&!1===n.isMaintained&&(r+=" event_finished"),n.saleOrder&&2===n.saleOrder.sdsTypeSelect&&6!==n.statusSelect&&4!==n.statusSelect&&(r+=" event_saleOrder_not_posed"),r};var n=function(t,n,a){if(0===a.level&&void 0!==a.open)if("withStockLocation"===e){var r=me.getOpenStockLocations();r[a.id]&&(r[a.id].open=a.open,me.setOpenStockLocations(r))}else{var i=me.getOpenMachineTypes();i[a.id]&&(i[a.id].open=a.open,me.setOpenMachineTypes(i))}return 0===a.level?'\n        <div style="display:flex;font-size:12px;width:100%;">\n        <div style="position:relative;flex:1;">\n        <div>'.concat(a.label,'</div>\n        </div>\n        <div class="open_type" style="width:8%;">\n        <img style="width:"11px", height:"11px""  src="content/').concat(a.open?"collapse":"expand",'.png" alt="').concat(a.label,'">\n        </div>\n        </div>'):'\n        <div>\n        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%">\n          <div style="padding-bottom: 5px">'.concat(a.label,"</div>\n            ").concat(a.picture?'\n              <div style="width:80px;height:48px; background-image:url('.concat("/axelor-erp/ws/rest/com.axelor.meta.db.MetaFile/").concat(a.picture.id).concat("/content/download",'); \n              background-size: contain;\n              background-repeat: no-repeat;\n              background-position: center;" />'):"","\n          </div>\n       </div>")};for(var a in t.matrix)t.templates[a+"_scale_label"]=n}))}(e.planningViewType);var s,d=function(e,t){if(t){var n,a=window.scheduler,r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],i=[];return t&&t.forEach((function(t){e&&e.forEach((function(e){if(t.weeklyPlanning&&t.weeklyPlanning.id===e.weeklyPlann.id){var o,c,l,s,d=e.name,u=e.morningFrom,p=e.morningTo,m=e.afternoonFrom,h=e.afternoonTo,f=!0;o=D(u),c=D(p),l=D(m),s=D(h),u&&p&&m&&h?n=[o,c,l,s]:u&&p&&null===m&&null===h?n=[o,c]:u&&null===p&&null===m&&h?n=[o,s]:u&&null===p&&null===h?n=[o,1440]:null===u&&null===p&&m&&h?n=[l,s]:null===u&&null===p&&m&&null===h?n=[l,1440]:null===u&&null===m&&p?n=[0,c]:null===u&&null===p&&null===m&&h?n=[0,s]:null===u&&p&&m&&null===h?n=[0,c,l,1440]:null===u&&null===p&&null===m&&null===h&&(n="fullday",f=!1);var v=a.addMarkedTimespan({days:r.indexOf(d),zones:n,invert_zones:f,css:"gray_section",sections:{timeline:t.id,week_timeline:t.id,month_timeline:t.id},type:"planning"});i.push(v)}}))})),i}}(e.renderData.dayPlanningList,e.renderData.machineList),p=Re(e.maintenanceRequestList,b);o(d),O(p),s=e.setReloadOperations,window.scheduler._click.buttons.freeze=function(e){Ee({isPinned:!0},e,s)},function(e){var t=window.scheduler;t._click.buttons.free=function(n){t.hideQuickInfo(),t._quick_info_box=null,Ee({isPinned:!1},n,e);var a=["icon_freeze"],r=t.getEvent(n);3===r.statusSelect&&a.push("icon_start"),4===r.statusSelect&&a.push("icon_end"),a.push("icon_delete"),t.config.icons_select=a,t.showQuickInfo(n)}}(e.setReloadOperations),function(e){var t=window,n=t.scheduler,a=t.dhtmlx;n._click.buttons.start=function(t){var n={context:{id:t}};K.getAction("com.axelor.apps.production.db.OperationOrder","action-operation-order-group-start",n).then((function(t){t.json().then((function(t){var n=t.data;if(n&&n.length){var r=n[0];r&&!0===r.reload?e(!0):r&&r.flash&&a.alert({text:r.flash})}}))}))}}(e.setReloadOperations),function(e){window.scheduler._click.buttons.end=function(t){var n={context:{id:t}};K.getAction("com.axelor.apps.production.db.OperationOrder","action-operation-order-group-finish",n).then((function(t){t.json().then((function(t){e(!0)}))}))}}(e.setReloadOperations),function(e){var t=window,n=t.scheduler,a=t.dhtmlx;n._click.buttons.delete=function(t){n.getEvent(t).isPinned?a.alert({text:"You can't unplan a frozen operation."}):a.confirm({type:"confirm-warning",text:T("Are you sure you want to unplan it?"),callback:function(n){n&&K.getAction("com.axelor.apps.production.db.OperationOrder","com.axelor.apps.production.pro.web.ProProductionOrderController:undoMicroPlanning",{id:t}).then((function(t){t&&e(!0)}))}})}}(e.setReloadOperations),function(e){var t=window.scheduler,n=me.getActiveMode()||"timeline",a=me.getActiveDate()||new Date;t.init("scheduler_here",a,n),t.parse(e,"json")}(e.renderData.renderOperationOrder),function(e,t){var n=window.scheduler;if(e);else{n.destroyCalendar(e);var a=n.renderCalendar({container:"cal_here",navigation:!0,handler:function(e){n.setCurrentView(e,n._mode)}});t(a),n.linkCalendar(a)}}(I,M),e.renderData.manageChangeDuration&&function(e,t,n){window.scheduler._click.buttons.change_duration=function(a){e(!0),t(a),n("")}}(q,X,te)}),[e.renderData.renderOperationOrder,e.renderData.machineList,e.renderData.employeeList,e.renderData.manageChangeDuration]),Object(a.useEffect)((function(){var t=window.scheduler;if(ee){h&&t.detachEvent(h);var n=e.renderData.machineList&&e.renderData.machineList.length>0,a=Pe(ee,e.setReloadOperations,te,e.renderData.manageChangeDuration,ie,n);f(a)}}),[ee]),Object(a.useEffect)((function(){var t=window.scheduler;if(re&&re.move&&re.id){var n={context:{id:re.id}};ze(n,e.renderData.machineList,E)}!re||re.move||re.id||(w.forEach((function(e){t.deleteMarkedTimespan(e)})),E([]))}),[re.move]);var oe=function(){var e=window.scheduler,t=e.getState().mode,n=e.getState().date;me.setActiveDate(n),me.setActiveMode(t),i&&i.forEach((function(t){e.deleteMarkedTimespan(t)})),b&&b.forEach((function(t){e.deleteMarkedTimespan(t)})),d&&d.forEach((function(t){e.detachEvent(t)})),w&&w.forEach((function(t){e.deleteMarkedTimespan(t)})),E([]),h&&e.detachEvent(h),e.clearAll()};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("div",{style:{float:"left",width:"250px",height:"380px",margin:15}},"timeline"===A&&r.a.createElement(ye.a,{className:"basic-single",label:"Param\xe9trages",classNamePrefix:"select",defaultValue:Ye[0],name:"planningTime",options:Ye,onChange:function(t){V(t.value),De(e.type,t.value)}}),e.renderData.renderDraftOperationOrder&&r.a.createElement(ge,{operationOrderListLength:e.renderData.renderOperationOrder.length,draftOperationOrderListLength:e.renderData.renderDraftOperationOrder.length,onDragend:function(){var e=window.scheduler;C(!1),w&&w.forEach((function(t){e.deleteMarkedTimespan(t)})),E([])},workCenterGroup:e.workCenterGroup,setWorkCenterGroup:e.setWorkCenterGroup,filter:e.filter,setFilter:e.setFilter,secondFilter:e.secondFilter,setSecondFilter:e.setSecondFilter,renderDraftOperationOrder:e.renderData.renderDraftOperationOrder,workCenterGroupModelList:e.renderData.workCenterGroupModelList,partnerList:e.partnerList,productList:e.productList,searchTypeSelect:e.searchTypeSelect,setSearchTypeSelect:e.setSearchTypeSelect}),r.a.createElement("div",{id:"cal_here",style:{width:"250px",height:"200px",marginTop:50}})),r.a.createElement("div",{id:"scheduler_here",className:"dhx_cal_container",style:{width:"100%",height:"900PX"},onDrop:function(t){var n=window,a=n.scheduler,r=n.dhtmlx;t.preventDefault();var i=a.getActionData(t),o=i.date,c=new Date(o);c.setDate(c.getDate()+1);var l=i.section,s=null,d=!1;if(e.renderData.machineList&&e.renderData.machineList.length>0){var u=e.renderData.machineList.find((function(e){return e.id===l}));if(u){d=!0;var p=u.workCenter;p&&(s=p.id)}}var m=a.addEvent({start_date:o,end_date:c,text:"Test",section_id:l});if(a.checkInMarkedTimespan(a.getEvent(m),"previous_operation"))return a.deleteEvent(m),w&&w.forEach((function(e){a.deleteMarkedTimespan(e)})),E([]),a.updateView(),r.alert({text:T("Warning! You are about to reschedule an operation during a previous operation.")}),!1;if(a.checkInMarkedTimespan(a.getEvent(m),"unauthorized_machine"))return a.deleteEvent(m),w&&w.forEach((function(e){a.deleteMarkedTimespan(e)})),E([]),a.updateView(),r.alert({text:T("Warning! You are about to reschedule an operation with an unauthorized machine.")}),!1;a.deleteEvent(m);var h=me.getDragDataId();s||!d?Ge(l,h,s,o,e.setReloadOperations,d):r.alert({text:T("Warning ! The work center on the machine is not set.")})},onDragOver:function(t){if(t.preventDefault(),!S){C(!0),console.debug("e.datatransfert",t.dataTransfer);var n=me.getDragDataId();ze({context:{id:n}},e.renderData.machineList,E)}}},r.a.createElement("div",{className:"dhx_cal_navline"},r.a.createElement("div",{className:"prevButton",onClick:function(){var t=window.scheduler,n=t.getState().mode,a=t.getState().date;if("timeline"===n){var r=new Date(a.setMinutes(a.getMinutes()-Y));t.setCurrentView(r),De(e.type,Y,r)}else if("week_timeline"===n){var i=a.setDate(a.getDate()-7);t.setCurrentView(i,"week_timeline")}else if("month_timeline"===n){var o=a.setMonth(a.getMonth()-1);t.setCurrentView(o,"month_timeline")}}},"\xa0"),r.a.createElement("div",{className:"nextButton",onClick:function(){var t=window.scheduler,n=t.getState().mode,a=t.getState().date;if("timeline"===n){var r=new Date(a.setMinutes(a.getMinutes()+Y));t.setCurrentView(r),De(e.type,Y,r)}else if("week_timeline"===n){var i=a.setDate(a.getDate()+7);t.setCurrentView(i,"week_timeline")}else if("month_timeline"===n){var o=a.setMonth(a.getMonth()+1);t.setCurrentView(o,"month_timeline")}}},"\xa0"),r.a.createElement("div",{className:"dhx_cal_today_button"}),r.a.createElement("div",{className:"dhx_cal_refresh_button",onClick:function(){oe(),O([]),o([]),u([]),f(null),e.setReload(!0)}},T("Refresh")),r.a.createElement("div",{className:"dhx_cal_date"}),r.a.createElement("div",{className:"dhx_cal_tab",name:"timeline_tab"}),r.a.createElement("div",{className:"dhx_cal_tab",name:"week_timeline_tab"}),r.a.createElement("div",{className:"dhx_cal_tab",name:"month_timeline_tab"})),r.a.createElement("div",{className:"dhx_cal_header"}),r.a.createElement("div",{className:"dhx_cal_data"}))),r.a.createElement(N,{open:B,reason:ee,setReason:te,setChangeDurationOpen:q,validateChangeDuration:function(){if(Q&&ee){Ee({sdsChangeDuration:!0},Q,e.setReloadOperations)}}}),r.a.createElement(We,{loading:e.loading}))})),Fe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function He(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(Ve,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");Fe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):He(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):He(t,e)}))}}()}},[[328,1,2]]]);
//# sourceMappingURL=main.46799087.chunk.js.map